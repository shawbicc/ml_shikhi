/**
 * Translations for ML Storytelling App
 * Supports English (en) and Bengali (bn)
 */

const translations = {
  // English translations
  en: {
    // General UI elements
    app_name: "ML Explorer's Journey",
    tagline: "Learn Machine Learning through an epic adventure",
    start_journey: "Start Your Journey",
    continue_journey: "Continue Journey",
    resources: "Learning Resources",
    about: "About",
    settings: "Settings",
    language: "Language",
    english: "English",
    bengali: "বাংলা",
    next: "Next",
    previous: "Previous",
    submit: "Submit",
    reset: "Reset",
    hint: "Get Hint",
    run_code: "Run Code",
    check_answer: "Check Answer",
    congratulations: "Congratulations!",
    try_again: "Try Again",
    score: "Score",
    progress: "Progress",
    chapter: "Chapter",
    locked: "Locked",
    available: "Available",
    completed: "Completed",
    
    // AI Assistant
    assistant_name: "ML Mentor",
    assistant_greeting: "Hello! I'm your ML Mentor. Need help with machine learning concepts or code puzzles? Just ask!",
    assistant_placeholder: "Ask for help...",
    assistant_send: "Send",
    
    // Story elements - Chapter 1
    chapter1_title: "The Fundamentals of Data",
    chapter1_intro: "You've discovered an ancient book containing the secrets of Machine Learning. The first chapter glows with mysterious symbols that seem to represent data patterns.",
    chapter1_task: "To unlock the book's knowledge, you must first understand how to read its language - the language of data.",
    chapter1_puzzle_title: "Identifying Features and Labels",
    chapter1_puzzle_description: "Complete the code to identify features and labels in this dataset about magical creatures.",
    
    // Story elements - Chapter 2
    chapter2_title: "The Patterns in Numbers",
    chapter2_intro: "The second chapter of the ancient book reveals itself, showing intricate patterns connecting numbers and outcomes.",
    chapter2_task: "Before you can progress, you must learn to clean the noisy data and find hidden correlations.",
    chapter2_puzzle_title: "Data Preprocessing and Correlation",
    chapter2_puzzle_description: "Complete the code to preprocess the dataset and identify correlations between features.",
    
    // Story elements - Chapter 3
    chapter3_title: "The Decision Trees of Knowledge",
    chapter3_intro: "The book transports your mind to a magical forest where trees make decisions based on features of objects passing through.",
    chapter3_task: "Navigate the forest by building a decision tree that correctly classifies magical creatures.",
    chapter3_puzzle_title: "Building a Decision Tree Classifier",
    chapter3_puzzle_description: "Complete the code to create a decision tree that predicts creature types based on their features.",
    
    // Story elements - Chapter 4
    chapter4_title: "The Linear Path",
    chapter4_intro: "You encounter a bridge that adjusts its path to reach different islands. The book shows you how to predict where the bridge will lead.",
    chapter4_task: "Master linear regression to predict continuous values and evaluate your model's performance.",
    chapter4_puzzle_title: "Implementing Linear Regression",
    chapter4_puzzle_description: "Complete the code to build a linear regression model and evaluate its predictions.",
    
    // Story elements - Chapter 5
    chapter5_title: "The Neural Network Maze",
    chapter5_intro: "The book reveals a complex maze with interconnected paths, mimicking the structure of neural networks in the brain.",
    chapter5_task: "Build a neural network to navigate through the maze and recognize hidden patterns.",
    chapter5_puzzle_title: "Creating a Simple Neural Network",
    chapter5_puzzle_description: "Complete the code to build and train a neural network that can recognize patterns.",
    
    // Story elements - Chapter 6
    chapter6_title: "The Final Challenge",
    chapter6_intro: "You've reached the final chapter of the ancient book. Now you must apply all your knowledge to solve a complex problem.",
    chapter6_task: "Build and optimize a complete machine learning solution to unlock the book's ultimate wisdom.",
    chapter6_puzzle_title: "Building a Complete ML Solution",
    chapter6_puzzle_description: "Complete the code to build, tune, and evaluate a machine learning model for the final challenge.",
    
    // Resources section
    resources_title: "ML Explorer's Library",
    resources_description: "Expand your knowledge with these valuable resources on machine learning concepts.",
    resource_basics: "ML Fundamentals",
    resource_preprocessing: "Data Preprocessing",
    resource_decision_trees: "Decision Trees",
    resource_regression: "Linear Regression",
    resource_neural_networks: "Neural Networks",
    resource_evaluation: "Model Evaluation",
    
    // Footer
    footer_about: "About ML Explorer",
    footer_contact: "Contact Us",
    footer_privacy: "Privacy Policy",
    footer_terms: "Terms of Use",
    copyright: "© 2025 ML Explorer's Journey. All rights reserved.",
    
    // Offline mode
    offline_mode: "Offline Mode",
    offline_active: "You are currently using the app in offline mode.",
    sync_data: "Sync Data When Online",
    
    // Error messages
    error_incorrect: "That's not quite right. Try again!",
    error_syntax: "There's a syntax error in your code.",
    error_runtime: "Your code encountered an error while running.",
    connection_error: "Connection error. Working in offline mode."
  },
  
  // Bengali translations
  bn: {
    // General UI elements
    app_name: "এমএল এক্সপ্লোরারের যাত্রা",
    tagline: "একটি মহাকাব্যিক অ্যাডভেঞ্চারের মাধ্যমে মেশিন লার্নিং শিখুন",
    start_journey: "আপনার যাত্রা শুরু করুন",
    continue_journey: "যাত্রা চালিয়ে যান",
    resources: "শিক্ষামূলক সম্পদ",
    about: "সম্পর্কে",
    settings: "সেটিংস",
    language: "ভাষা",
    english: "English",
    bengali: "বাংলা",
    next: "পরবর্তী",
    previous: "পূর্ববর্তী",
    submit: "জমা দিন",
    reset: "রিসেট",
    hint: "ইঙ্গিত পান",
    run_code: "কোড চালান",
    check_answer: "উত্তর যাচাই করুন",
    congratulations: "অভিনন্দন!",
    try_again: "আবার চেষ্টা করুন",
    score: "স্কোর",
    progress: "অগ্রগতি",
    chapter: "অধ্যায়",
    locked: "লক করা",
    available: "উপলব্ধ",
    completed: "সম্পন্ন",
    
    // AI Assistant
    assistant_name: "এমএল মেন্টর",
    assistant_greeting: "হ্যালো! আমি আপনার এমএল মেন্টর। মেশিন লার্নিং ধারণা বা কোড পাজল নিয়ে সাহায্য দরকার? শুধু জিজ্ঞাসা করুন!",
    assistant_placeholder: "সাহায্য চান...",
    assistant_send: "পাঠান",
    
    // Story elements - Chapter 1
    chapter1_title: "ডেটার মৌলিক বিষয়",
    chapter1_intro: "আপনি মেশিন লার্নিংয়ের রহস্য সম্বলিত একটি প্রাচীন বই আবিষ্কার করেছেন। প্রথম অধ্যায়টি রহস্যময় প্রতীক দিয়ে উজ্জ্বল যা ডেটা প্যাটার্ন প্রতিনিধিত্ব করে বলে মনে হয়।",
    chapter1_task: "বইয়ের জ্ঞান আনলক করতে, আপনাকে প্রথমে এর ভাষা বুঝতে হবে - ডেটার ভাষা।",
    chapter1_puzzle_title: "বৈশিষ্ট্য এবং লেবেল চিহ্নিত করা",
    chapter1_puzzle_description: "জাদুকরী প্রাণীদের সম্পর্কে এই ডেটাসেটে বৈশিষ্ট্য এবং লেবেল চিহ্নিত করতে কোডটি সম্পূর্ণ করুন।",
    
    // Story elements - Chapter 2
    chapter2_title: "সংখ্যার মধ্যে প্যাটার্ন",
    chapter2_intro: "প্রাচীন বইয়ের দ্বিতীয় অধ্যায় নিজেকে প্রকাশ করে, সংখ্যা এবং ফলাফলের মধ্যে জটিল প্যাটার্ন দেখায়।",
    chapter2_task: "আগে বাড়তে পারার আগে, আপনাকে শব্দময় ডেটা পরিষ্কার করতে এবং লুকানো সহসম্পর্ক খুঁজে বের করতে হবে।",
    chapter2_puzzle_title: "ডেটা প্রিপ্রসেসিং এবং সহসম্পর্ক",
    chapter2_puzzle_description: "ডেটাসেট প্রিপ্রসেস করতে এবং বৈশিষ্ট্যগুলির মধ্যে সহসম্পর্ক চিহ্নিত করতে কোডটি সম্পূর্ণ করুন।",
    
    // Story elements - Chapter 3
    chapter3_title: "জ্ঞানের সিদ্ধান্ত বৃক্ষ",
    chapter3_intro: "বইটি আপনার মনকে একটি জাদুকরী বনে নিয়ে যায় যেখানে গাছগুলি তাদের মধ্য দিয়ে যাওয়া বস্তুর বৈশিষ্ট্যের উপর ভিত্তি করে সিদ্ধান্ত নেয়।",
    chapter3_task: "জাদুকরী প্রাণীদের সঠিকভাবে শ্রেণীবদ্ধ করে এমন একটি সিদ্ধান্ত বৃক্ষ তৈরি করে বনের মধ্যে নেভিগেট করুন।",
    chapter3_puzzle_title: "একটি সিদ্ধান্ত বৃক্ষ ক্লাসিফায়ার তৈরি করা",
    chapter3_puzzle_description: "প্রাণীদের বৈশিষ্ট্যের উপর ভিত্তি করে তাদের ধরন পূর্বাভাস দেয় এমন একটি সিদ্ধান্ত বৃক্ষ তৈরি করতে কোডটি সম্পূর্ণ করুন।",
    
    // Story elements - Chapter 4
    chapter4_title: "রৈখিক পথ",
    chapter4_intro: "আপনি এমন একটি সেতু দেখতে পান যা বিভিন্ন দ্বীপে পৌঁছাতে তার পথ সামঞ্জস্য করে। বইটি আপনাকে দেখায় কিভাবে সেতুটি কোথায় নিয়ে যাবে তা পূর্বাভাস দিতে হয়।",
    chapter4_task: "ক্রমাগত মান পূর্বাভাস দিতে এবং আপনার মডেলের কর্মক্ষমতা মূল্যায়ন করতে লিনিয়ার রিগ্রেশন মাস্টার করুন।",
    chapter4_puzzle_title: "লিনিয়ার রিগ্রেশন বাস্তবায়ন",
    chapter4_puzzle_description: "একটি লিনিয়ার রিগ্রেশন মডেল তৈরি করতে এবং এর পূর্বাভাস মূল্যায়ন করতে কোডটি সম্পূর্ণ করুন।",
    
    // Story elements - Chapter 5
    chapter5_title: "নিউরাল নেটওয়ার্ক ম্যাজ",
    chapter5_intro: "বইটি একটি জটিল ম্যাজ প্রকাশ করে যার সংযুক্ত পথগুলি মস্তিষ্কের নিউরাল নেটওয়ার্কের গঠনের অনুকরণ করে।",
    chapter5_task: "ম্যাজের মধ্য দিয়ে নেভিগেট করতে এবং লুকানো প্যাটার্ন চিনতে একটি নিউরাল নেটওয়ার্ক তৈরি করুন।",
    chapter5_puzzle_title: "একটি সহজ নিউরাল নেটওয়ার্ক তৈরি করা",
    chapter5_puzzle_description: "প্যাটার্ন চিনতে পারে এমন একটি নিউরাল নেটওয়ার্ক তৈরি এবং প্রশিক্ষণ দিতে কোডটি সম্পূর্ণ করুন।",
    
    // Story elements - Chapter 6
    chapter6_title: "চূড়ান্ত চ্যালেঞ্জ",
    chapter6_intro: "আপনি প্রাচীন বইয়ের শেষ অধ্যায়ে পৌঁছেছেন। এখন আপনাকে একটি জটিল সমস্যা সমাধান করতে আপনার সমস্ত জ্ঞান প্রয়োগ করতে হবে।",
    chapter6_task: "বইয়ের চূড়ান্ত জ্ঞান আনলক করতে একটি সম্পূর্ণ মেশিন লার্নিং সমাধান তৈরি এবং অপ্টিমাইজ করুন।",
    chapter6_puzzle_title: "একটি সম্পূর্ণ এমএল সমাধান তৈরি করা",
    chapter6_puzzle_description: "চূড়ান্ত চ্যালেঞ্জের জন্য একটি মেশিন লার্নিং মডেল তৈরি, টিউন এবং মূল্যায়ন করতে কোডটি সম্পূর্ণ করুন।",
    
    // Resources section
    resources_title: "এমএল এক্সপ্লোরারের লাইব্রেরি",
    resources_description: "মেশিন লার্নিং ধারণাগুলির এই মূল্যবান সম্পদগুলি দিয়ে আপনার জ্ঞান বাড়ান।",
    resource_basics: "এমএল মৌলিক বিষয়",
    resource_preprocessing: "ডেটা প্রিপ্রসেসিং",
    resource_decision_trees: "সিদ্ধান্ত বৃক্ষ",
    resource_regression: "লিনিয়ার রিগ্রেশন",
    resource_neural_networks: "নিউরাল নেটওয়ার্ক",
    resource_evaluation: "মডেল মূল্যায়ন",
    
    // Footer
    footer_about: "এমএল এক্সপ্লোরার সম্পর্কে",
    footer_contact: "যোগাযোগ করুন",
    footer_privacy: "গোপনীয়তা নীতি",
    footer_terms: "ব্যবহারের শর্তাবলী",
    copyright: "© ২০২৫ এমএল এক্সপ্লোরারের যাত্রা। সর্বস্বত্ব সংরক্ষিত।",
    
    // Offline mode
    offline_mode: "অফলাইন মোড",
    offline_active: "আপনি বর্তমানে অফলাইন মোডে অ্যাপটি ব্যবহার করছেন।",
    sync_data: "অনলাইন হলে ডেটা সিঙ্ক করুন",
    
    // Error messages
    error_incorrect: "এটি সঠিক নয়। আবার চেষ্টা করুন!",
    error_syntax: "আপনার কোডে একটি সিনট্যাক্স ত্রুটি আছে।",
    error_runtime: "আপনার কোড চালানোর সময় একটি ত্রুটি হয়েছে।",
    connection_error: "সংযোগ ত্রুটি। অফলাইন মোডে কাজ করছে।"
  }
};

// Default language
let currentLanguage = 'en';

// Function to get translation
function getTranslation(key) {
  if (!translations[currentLanguage][key]) {
    console.warn(`Translation missing for key: ${key} in language: ${currentLanguage}`);
    // Fallback to English if translation is missing
    if (translations['en'][key]) {
      return translations['en'][key];
    }
    // Return the key itself if no translation exists
    return key;
  }
  return translations[currentLanguage][key];
}

// Function to change language
function changeLanguage(lang) {
  if (translations[lang]) {
    currentLanguage = lang;
    document.documentElement.lang = lang;
    updatePageContent();
    // Save language preference
    localStorage.setItem('ml_explorer_language', lang);
    return true;
  }
  return false;
}

// Function to update all translatable content on the page
function updatePageContent() {
  // Update all elements with data-i18n attribute
  document.querySelectorAll('[data-i18n]').forEach(element => {
    const key = element.getAttribute('data-i18n');
    element.textContent = getTranslation(key);
  });
  
  // Update all input placeholders with data-i18n-placeholder
  document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
    const key = element.getAttribute('data-i18n-placeholder');
    element.placeholder = getTranslation(key);
  });
  
  // Update all buttons with data-i18n-value
  document.querySelectorAll('[data-i18n-value]').forEach(element => {
    const key = element.getAttribute('data-i18n-value');
    element.value = getTranslation(key);
  });
  
  // Update all elements with title attributes using data-i18n-title
  document.querySelectorAll('[data-i18n-title]').forEach(element => {
    const key = element.getAttribute('data-i18n-title');
    element.title = getTranslation(key);
  });
}

// Initialize language from saved preference or browser settings
function initLanguage() {
  const savedLanguage = localStorage.getItem('ml_explorer_language');
  if (savedLanguage && translations[savedLanguage]) {
    changeLanguage(savedLanguage);
  } else {
    // Try to detect browser language
    const browserLang = navigator.language.split('-')[0];
    if (translations[browserLang]) {
      changeLanguage(browserLang);
    }
  }
}

// Export functions for use in other modules
if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    getTranslation,
    changeLanguage,
    updatePageContent,
    initLanguage
  };
}
